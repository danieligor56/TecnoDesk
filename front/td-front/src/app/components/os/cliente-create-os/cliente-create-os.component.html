<div class="container">

  <div class="titPage" style="padding:5px;margin-bottom: 10px;">
    <h1 id="osH1">Novo cliente</h1>
  </div>

  <mat-dialog-content>
    <!-- FORM STEP 1: Informações Pessoais -->
    <form [formGroup]="clienteCreateForm" *ngIf="form1" name="form1">
      <h4><mat-icon style="font-size: 18px; vertical-align: middle;">person_add</mat-icon> Informações Pessoais</h4>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>Nome Completo</mat-label>
        <input formControlName="nome" required matInput placeholder="Ex: João Silva">
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>CPF ou CNPJ</mat-label>
        <input formControlName="documento" required matInput mask="000.000.000-00">
        <mat-icon matSuffix>badge</mat-icon>
      </mat-form-field>

      <div class="row-fields">
        <mat-form-field class="medPut" appearance="outline">
          <mat-label>Celular Principal</mat-label>
          <input formControlName="cel1" required matInput mask="(00) 0 0000-0000">
          <mat-icon matSuffix>call</mat-icon>
        </mat-form-field>
        <mat-form-field class="medPut" appearance="outline">
          <mat-label>Celular Secundário</mat-label>
          <input formControlName="cel2" matInput mask="(00) 0 0000-0000">
          <mat-icon matSuffix>call</mat-icon>
        </mat-form-field>
      </div>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>E-mail</mat-label>
        <input formControlName="email" required matInput placeholder="joao@exemplo.com">
        <mat-icon matSuffix>mail</mat-icon>
      </mat-form-field>
    </form>

    <!-- FORM STEP 2: Endereço -->
    <form [formGroup]="clienteCreateForm" *ngIf="form2">
      <h4><mat-icon style="font-size: 18px; vertical-align: middle;">location_on</mat-icon> Localização</h4>

      <div class="row-fields">
        <mat-form-field class="medPut" appearance="outline">
          <mat-label>CEP</mat-label>
          <input formControlName="cep" matInput placeholder="00000-000" mask="00000-000"
            (blur)="autoCep(clienteCreateForm.get('cep').value)">
          <mat-icon matSuffix>map</mat-icon>
        </mat-form-field>
        <mat-form-field class="smallPut" appearance="outline">
          <mat-label>UF</mat-label>
          <input formControlName="estado" matInput readonly>
        </mat-form-field>
      </div>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>Cidade</mat-label>
        <input formControlName="cidade" matInput readonly>
      </mat-form-field>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>Logradouro / Rua</mat-label>
        <input formControlName="logradouro" matInput>
      </mat-form-field>

      <div class="row-fields">
        <mat-form-field class="smallPut" appearance="outline">
          <mat-label>Nº</mat-label>
          <input formControlName="numero" matInput>
        </mat-form-field>
        <mat-form-field class="medPut" appearance="outline">
          <mat-label>Bairro</mat-label>
          <input formControlName="bairro" matInput>
        </mat-form-field>
      </div>

      <mat-form-field class="fullWidth" appearance="outline">
        <mat-label>Observações (opcional)</mat-label>
        <input formControlName="obs" matInput placeholder="Complemento, pontos de referência...">
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end" style="padding: 0 32px 32px 32px;">
    <!-- Botões para Step 1 -->
    <ng-container *ngIf="form1">
      <button (click)="closeDialog()" class="medPut cancel-btn" mat-button>Cancelar</button>
      <button [disabled]="!validaCampos()" (click)="cadastrarEndereco()" class="medPut save-btn" mat-flat-button
        color="primary">Prosseguir</button>
    </ng-container>

    <!-- Botões para Step 2 -->
    <ng-container *ngIf="form2">
      <button (click)="cadastraInfoPessoal()" class="medPut back-btn" mat-button>Voltar</button>
      <button [disabled]="!validaCampos()" (click)="create()" class="medPut save-btn" mat-flat-button
        color="primary">Finalizar Cadastro</button>
    </ng-container>
  </mat-dialog-actions>
</div>