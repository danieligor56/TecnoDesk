<h2 mat-dialog-title class="dialog-title-custom">Editar colaborador</h2>

<mat-dialog-content class="mat-typography">
  <div class="responsive-container">
    <!-- Cargos / Acesso -->
    <h4 class="full-row"><mat-icon style="font-size: 18px; vertical-align: middle;">admin_panel_settings</mat-icon>
      Cargos / Acesso</h4>
    <section class="section full-row" style="margin-bottom: 24px; display: flex; gap: 16px; flex-wrap: wrap;">
      <mat-checkbox [(ngModel)]="this.isTecnico" (blur)="setOcupacao()" name="isTec"
        color="primary">Técnico</mat-checkbox>
      <mat-checkbox [(ngModel)]="this.isAtendente" name="isAtend" color="primary">Atendente</mat-checkbox>
      <mat-checkbox [(ngModel)]="this.isGestor" name="isGest" color="primary">Gestor</mat-checkbox>
    </section>

    <!-- FORM STEP 1: Informações Pessoais -->
    <form [formGroup]="colaboradorCreateForm" *ngIf="form1" name="form1" class="responsive-grid">
      <h4 class="full-row"><mat-icon style="font-size: 18px; vertical-align: middle;">person_add</mat-icon> Informações
        Pessoais</h4>

      <mat-form-field appearance="outline">
        <mat-label>Nome Completo</mat-label>
        <input formControlName="nome" required matInput placeholder="Ex: João Silva">
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>CPF ou CNPJ</mat-label>
        <input formControlName="documento" required matInput mask="000.000.000-00">
        <mat-icon matSuffix>badge</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Contato</mat-label>
        <input formControlName="cel1" required matInput mask="(00) 000000000">
        <mat-icon matSuffix>call</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>E-mail</mat-label>
        <input formControlName="email" required matInput placeholder="joao@exemplo.com">
        <mat-icon matSuffix>mail</mat-icon>
      </mat-form-field>

      <div class="actions full-row">
        <button (click)="this.dialogRef.close()" class="medPut" mat-button color="warn">Cancelar</button>
        <button [disabled]="!validaCampos()" (click)="cadastrarEndereco(); setOcupacao()" class="medPut" mat-flat-button
          color="primary">Próximo (Endereço)</button>
      </div>

      <a class="full-row" *ngIf="!verificaUsuario"
        style="color: gray; margin-top: 8px; font-size: 12px; cursor: pointer;">Enviar convite para criação de
        usuário?</a>
    </form>

    <!-- FORM STEP 2: Endereço -->
    <form [formGroup]="colaboradorCreateForm" *ngIf="form2" class="responsive-grid">
      <h4 class="full-row"><mat-icon style="font-size: 18px; vertical-align: middle;">location_on</mat-icon> Localização
      </h4>

      <mat-form-field appearance="outline">
        <mat-label>CEP</mat-label>
        <input formControlName="cep" matInput placeholder="00000-000" mask="00.000-000"
          (blur)="autoCep(colaboradorCreateForm.get('cep').value)">
        <mat-icon matSuffix>map</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>UF</mat-label>
        <input formControlName="estado" matInput readonly>
      </mat-form-field>

      <mat-form-field class="full-row" appearance="outline">
        <mat-label>Cidade</mat-label>
        <input formControlName="cidade" matInput readonly>
      </mat-form-field>

      <mat-form-field class="full-row" appearance="outline">
        <mat-label>Logradouro / Rua</mat-label>
        <input formControlName="logradouro" matInput>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Nº</mat-label>
        <input formControlName="numero" matInput>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Bairro</mat-label>
        <input formControlName="bairro" matInput>
      </mat-form-field>

      <mat-form-field class="full-row" appearance="outline">
        <mat-label>Observações (opcional)</mat-label>
        <input formControlName="obs" matInput placeholder="Complemento, pontos de referência...">
      </mat-form-field>

      <div class="actions full-row">
        <button (click)="cadastraInfoPessoal()" class="medPut" mat-button color="warn">Voltar</button>
        <button [disabled]="!validaCampos()" (click)="updateColaborador()" class="medPut" mat-flat-button
          color="primary">Salvar Alterações</button>
      </div>
    </form>
  </div>
</mat-dialog-content>